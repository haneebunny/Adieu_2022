(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{4679:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/river/6",function(){return a(2734)}])},2734:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Question6Page}});var n=a(6811),l=a(1664),r=a.n(l),c=a(7294);function Question6(){let[e,t]=(0,c.useState)(null),[a,l]=(0,c.useState)(null),[i,o]=(0,c.useState)([]),[s,u]=(0,c.useState)(null),[d,h]=(0,c.useState)([]),[m,f]=(0,c.useState)(1),[p,g]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=localStorage.getItem("name");e&&t(e)},[]);let uploadToCloudinary=async(t,a)=>{let n=new FormData,l=Date.now(),r="".concat(e,"_").concat(a,"_").concat(l);n.append("file",t),n.append("upload_preset","adieu2024"),n.append("public_id",r);try{let e=await fetch("https://api.cloudinary.com/v1_1/dhui5qhc7/image/upload",{method:"POST",body:n}),t=await e.json();if(e.ok)return t.secure_url;return console.error("Cloudinary upload failed:",t),null}catch(e){return console.error("Error uploading to Cloudinary:",e),null}},handleUpload=async()=>{if(!a||0===i.length){alert("모든 사진을 선택해주세요!");return}for(let[e,t]of(g(!0),await uploadToCloudinary(a,"answer24"),i.entries()))await uploadToCloudinary(t,"answer25_".concat(e+1));g(!1),f(2),alert("사진 업로드 완료!(아마도)")};return(0,n.BX)("div",{className:"min-h-screen flex flex-col justify-start items-center bg-cover bg-center bg-fixed pt-20",style:{backgroundImage:'url("/img/river_6.png")',backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[1===m&&(0,n.BX)("div",{className:"flex flex-col items-center text-center animate-fadeIn mb-20",children:[(0,n.BX)("h1",{className:"font-bold text-white mb-6",children:["올해의 대표 사진을 정하자면? ",(0,n.tZ)("br",{})," ㅎㅎ...2024년 얘기하는 거 알지?"]}),(0,n.tZ)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];l(t),u(URL.createObjectURL(t))}},className:"w-2/3 mb-4 text-white"}),a&&(0,n.BX)("div",{children:[(0,n.BX)("div",{className:"mb-6 flex flex-col justify-center items-center",children:[(0,n.BX)("p",{className:"text-white",children:["✨",e,"의 2024년✨"]}),(0,n.tZ)("img",{src:s,alt:"대표 사진 미리보기",className:"w-64 h-64 object-cover rounded-lg"}),(0,n.tZ)("p",{className:"text-white",children:"↑당신 멋져↑"})]}),(0,n.tZ)("h2",{className:"font-bold text-white",children:"올해의 사진 10장 뽑아줘!"}),(0,n.BX)("p",{className:"text-white mb-6",children:["앨범에서 즐겨찾기한 사진을 참고해조... ❤︎ ",(0,n.tZ)("br",{}),"난 너무 많아서 고르기 힘들어"]}),(0,n.tZ)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{if(e.target.files){let t=Array.from(e.target.files),a=t.slice(0,10);o(a),h(a.map(e=>URL.createObjectURL(e)))}},className:"w-2/3 mb-4 text-white"}),d.length>0&&(0,n.tZ)("div",{className:"flex justify-center",children:(0,n.tZ)("div",{className:"w-3/4 grid grid-cols-3 gap-4 mb-6",children:d.map((e,t)=>(0,n.tZ)("img",{src:e,alt:"사진 ".concat(t+1," 미리보기"),className:"w-32 h-32 object-cover rounded-lg"},t))})})]}),a&&10===i.length&&(0,n.tZ)("button",{onClick:handleUpload,className:"bg-customGreen text-white py-2 px-6 rounded-lg hover:bg-customDGreen",disabled:p,children:p?"업로드 중...(기다려줘요)":"업로드 하기"})]}),2===m&&(0,n.tZ)("div",{className:"flex flex-col items-center text-center",children:(0,n.tZ)(r(),{href:"/river/end",children:(0,n.tZ)("h1",{className:"font-bold text-white mb-6",children:"눌러줘!"})})})]})}function Question6Page(){return(0,n.tZ)(Question6,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4679)}),_N_E=e.O()}]);